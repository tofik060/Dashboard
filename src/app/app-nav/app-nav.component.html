<mat-sidenav-container class="sidenav-container">
  <mat-sidenav
    #drawer
    class="sidenav"
    fixedInViewport
    role="navigation"
    mode="side"
    [opened]="isPinned"
  >
    <mat-toolbar>
      <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
        <a routerLink="home" style="display: flex; align-items: center; gap: 8px; text-decoration: none;color: white;"
          ><img
            class="rounded-circle"
            style="width: 30px; height: 30px"
            src="../../assets/icon/icon.jpeg"
            alt=""
          />
          E-Mart</a
        >
        <button
          *ngIf="isLoggedIn"
          type="button"
          aria-label="Pin sidenav"
          mat-icon-button
          (click)="togglePin(drawer)"
          [matTooltip]="isPinned ? 'Unpin sidebar' : 'Pin sidebar'"
          [class.pinned]="isPinned"
        >
          <mat-icon aria-label="Pin icon">{{ isPinned ? 'radio_button_checked' : 'radio_button_unchecked' }}</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <mat-divider></mat-divider>
    <h3>
      <a class="nava" routerLink="home"
        ><mat-icon>dashboard</mat-icon> Dashboard</a
      >
    </h3>
    <!-- <mat-divider style="border-color: black;border-top-width: 1px;"></mat-divider> -->
    <mat-nav-list>
      <a mat-list-item routerLink="home"><mat-icon>home</mat-icon> Home</a>
      <a mat-list-item routerLink="products"
        ><mat-icon>shopping</mat-icon> Products</a
      >
      <a mat-list-item routerLink="category"
        ><mat-icon>categorys</mat-icon> Category</a
      >
      <a mat-list-item routerLink="order"
        ><mat-icon>shopping_cart</mat-icon> Order</a
      >
      <a mat-list-item routerLink="offer"><mat-icon>cloud</mat-icon> Offer</a>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <mat-toolbar color="primary">
      <mat-toolbar-row class="justify-content-between">
        <div style="display: flex; align-items: center;">
          <button
            *ngIf="isLoggedIn"
            type="button"
            aria-label="Toggle sidenav"
            mat-icon-button
            (click)="drawer.toggle()"
          >
            <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
          </button>
          <span style="margin-left: 8px;"
            ><a class="navA" routerLink="home" style="display: flex; align-items: center; gap: 8px;"
              ><img
                class="rounded-circle"
                style="width: 30px; height: 30px"
                src="../../assets/icon/icon.jpeg"
                alt=""
              />
              E-Mart</a
            >
          </span>
        </div>
        <div class="row mr-2 ml-auto">
          <ol>
            <li *ngIf="isLoggedIn">
              <button
                mat-button
                [matMenuTriggerFor]="menu"
                class="user mt-2 d-flex align-item center"
              >
                <img
                  *ngIf="hasUserImage()"
                  class="rounded-circle"
                  [src]="getImageUrl(user.image)"
                  alt=""
                  style="width: 30px; height: 30px"
                />
                <div
                  *ngIf="!hasUserImage()"
                  class="user-initials-avatar rounded-circle"
                  style="width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; background-color: #4caf50; color: white; font-weight: bold; font-size: 12px;"
                >
                  {{ getUserInitials() }}
                </div>
                <mat-icon class="user-image-icon">keyboard_arrow_down</mat-icon>
              </button>
              <mat-menu #menu="matMenu" class="mt-2">
                <div *ngIf="isLoggedIn" style="padding: 16px; min-width: 200px;">
                  <div style="font-weight: 500; margin-bottom: 4px; color: #333;">
                    <mat-icon style="margin-bottom: -2px;" class="detail-icon">person</mat-icon>
                    {{ user ? user.name : "User Name" }}
                  </div>
                  <div style="font-size: 12px; color: #666;">
                    <mat-icon style="margin-bottom: -2px;" class="detail-icon">email</mat-icon>&nbsp;{{ user ? user.email : "user@email.com" }}
                  </div>
                </div>
                <hr style=" margin: 8px 8px;" *ngIf="isLoggedIn">
                <a routerLink="/profile" *ngIf="isLoggedIn" style="text-decoration: none;color: black; margin: 10px 10px;">
                  <mat-icon style="margin-bottom: -2px;" class="detail-icon">account_circle</mat-icon>
                  View Profile
                </a>
                <a routerLink="" *ngIf="!isLoggedIn" style="text-decoration: none;color: black; margin: 10px 10px;">
                  <mat-icon style="margin-bottom: -2px;" class="detail-icon">login</mat-icon> Login
                </a>
                <hr style=" margin: 8px 8px;" *ngIf="isLoggedIn">
                <a routerLink="/logout" *ngIf="isLoggedIn" style="text-decoration: none;color: black; margin: 10px 10px;">
                  <mat-icon style="margin-bottom: -2px;" class="detail-icon">exit_to_app</mat-icon>
                  logout
                </a>
              </mat-menu>
            </li>
          </ol>
        </div>
      </mat-toolbar-row>
    </mat-toolbar>
    <mat-divider></mat-divider>
    <!-- Add Content Here -->
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>
