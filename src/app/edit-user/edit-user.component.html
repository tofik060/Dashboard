<div class="d-flex justify-content-center responsive-container">
  <div class="container-fluid col-12 col-md-10 col-lg-8 col-xl-6">
    <!-- Loader -->
    <div *ngIf="isLoading" class="loader-container">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Loading profile data...</p>
    </div>
    
    <!-- Edit Form -->
    <form
      *ngIf="!isLoading"
      [formGroup]="userForm"
      (ngSubmit)="onUpdate()"
      enctype="multipart/form-data"
    >
      <mat-card>
        <mat-card-header class="responsive-header">
          <div class="d-flex flex-column align-items-center w-100">
            <div class="d-flex justify-content-center" *ngFor="let item of items | keyvalue">
              <ng-container *ngIf="item.key === 'image'">
                <img
                  *ngIf="hasUserImage()"
                  class="profile-avatar"
                  [src]="getImageUrl(item.value)"
                  alt="image"
                />
                <div
                  *ngIf="!hasUserImage()"
                  class="profile-avatar user-initials-avatar"
                  style="display: flex; align-items: center; justify-content: center; background-color: #4caf50; color: white; font-weight: bold; font-size: 48px;"
                >
                  {{ getUserInitials() }}
                </div>
              </ng-container>
            </div>
            <div class="my-3 d-flex justify-content-center w-100">
              <div class="file-input-container">
                <input
                  class="form-control"
                  type="file"
                  matInput
                  (change)="onImageSelected($event)"
                  value=""
                />
                <input type="hidden" formControlName="image" value="image" />
              </div>
            </div>
          </div>
        </mat-card-header>

        <mat-card-content>
          <div class="profile-info-placeholder">
            <mat-label>Name:</mat-label>
            <input
              class="form-control"
              type="text"
              matInput
              formControlName="name"
              placeholder="Your Name"
              value=""
            />
          </div>
          <div class="profile-info-placeholder">
            <mat-label>E-mail:</mat-label>
            <input
              class="form-control"
              type="email"
              matInput
              formControlName="email"
              placeholder="Your Name"
              value=""
            />
          </div>
          <div class="profile-info-placeholder">
            <mat-label>Phone:</mat-label>
            <input
              class="form-control"
              type="tel"
              matInput
              formControlName="phone"
              placeholder="Your Name"
              value=""
            />
          </div>
          <div class="profile-info-placeholder">
            <mat-label>Location:</mat-label>
            <input
              class="form-control"
              type="text"
              matInput
              formControlName="location"
              placeholder="Location"
              value=""
            />
          </div>
          <div class="d-flex flex-column flex-sm-row justify-content-center align-items-center gap-2 mt-3">
            <input type="submit" class="btn btn-success w-100 w-sm-auto" value="Update" />
            <input
              type="button"
              (click)="reset()"
              class="btn btn-danger w-100 w-sm-auto"
              value="Discard"
            />
          </div>
        </mat-card-content>
      </mat-card>
    </form>
  </div>
</div>